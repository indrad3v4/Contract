<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}DAODISEO AI BRAIN - Neural Real Estate Platform{% endblock %}</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Feather Icons -->
    <script src="{{ url_for('static', filename='js/lib/feather.min.js') }}"></script>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Core Frosted Glass Design System -->
    <style>
        /* ========== FROSTED GLASS DESIGN SYSTEM ========== */
        :root {
            /* AI Brain Color Palette */
            --brain-primary: #FF1493;  /* Strategic Pink CTA */
            --brain-secondary: #E00D79; /* Deep Pink Accent */
            --brain-tertiary: #4A90E2;  /* Neural Blue */
            --brain-neural: #6C5CE7;    /* Synapse Purple */
            --brain-success: #00D4AA;   /* Success Teal */
            --brain-warning: #FFC107;   /* Warning Amber */
            --brain-danger: #FF6B6B;    /* Error Red */
            
            /* Glassmorphism Foundation */
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --glass-blur: blur(10px);
            
            /* Typography & Spacing */
            --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --spacing-unit: 8px;
            --border-radius: 16px;
            
            /* Neural Network Background */
            --neural-bg: radial-gradient(circle at 20% 80%, rgba(255, 20, 147, 0.1) 0%, transparent 50%),
                         radial-gradient(circle at 80% 20%, rgba(74, 144, 226, 0.1) 0%, transparent 50%),
                         radial-gradient(circle at 40% 40%, rgba(108, 92, 231, 0.1) 0%, transparent 50%),
                         linear-gradient(135deg, #0a0e27 0%, #1a1b3a 100%);
        }
        
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: var(--font-primary);
            background: var(--neural-bg);
            background-attachment: fixed;
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        /* Neural Network Animation Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(2px 2px at 20px 30px, rgba(255, 20, 147, 0.3), transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(74, 144, 226, 0.3), transparent),
                radial-gradient(1px 1px at 90px 40px, rgba(108, 92, 231, 0.3), transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(0, 212, 170, 0.3), transparent);
            background-size: 100px 100px, 120px 120px, 80px 80px, 140px 140px;
            animation: neuralPulse 20s ease-in-out infinite;
            pointer-events: none;
            z-index: -1;
        }
        
        @keyframes neuralPulse {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.1); }
        }
        
        /* Frosted Glass Card Foundation */
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: var(--border-radius);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .glass-card:hover {
            transform: translateY(-4px);
            box-shadow: 
                0 16px 48px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 20, 147, 0.3);
        }
        
        /* AI Brain Central Hub */
        .ai-brain-hub {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto;
            background: radial-gradient(circle, rgba(255, 20, 147, 0.3) 0%, rgba(108, 92, 231, 0.2) 100%);
            border-radius: 50%;
            backdrop-filter: blur(30px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .ai-brain-hub::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(255, 20, 147, 0.5), transparent);
            animation: rotate 10s linear infinite;
        }
        
        .ai-brain-core {
            position: relative;
            z-index: 2;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            text-align: center;
            color: #ffffff;
            backdrop-filter: blur(10px);
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Orbital Satellite Components */
        .orbital-container {
            position: relative;
            width: 400px;
            height: 400px;
            margin: 0 auto;
        }
        
        .satellite {
            position: absolute;
            width: 80px;
            height: 80px;
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .satellite:hover {
            transform: scale(1.1);
            background: rgba(255, 20, 147, 0.2);
            border-color: var(--brain-primary);
        }
        
        /* CTA Button System */
        .btn-brain-primary {
            background: linear-gradient(135deg, var(--brain-primary) 0%, var(--brain-secondary) 100%);
            border: none;
            color: #ffffff;
            font-weight: 600;
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 4);
            border-radius: calc(var(--border-radius) / 2);
            transition: all 0.3s ease;
            box-shadow: 0 4px 16px rgba(255, 20, 147, 0.4);
            min-height: 44px;
        }
        
        .btn-brain-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(255, 20, 147, 0.6);
            background: linear-gradient(135deg, var(--brain-secondary) 0%, var(--brain-primary) 100%);
            color: #ffffff;
        }
        
        .btn-brain-secondary {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #ffffff;
            backdrop-filter: blur(10px);
            font-weight: 500;
            padding: calc(var(--spacing-unit) * 2) calc(var(--spacing-unit) * 4);
            border-radius: calc(var(--border-radius) / 2);
            transition: all 0.3s ease;
            min-height: 44px;
        }
        
        .btn-brain-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: var(--brain-primary);
            transform: translateY(-1px);
            color: #ffffff;
        }
        
        /* Navigation Sidebar */
        .nav-sidebar {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            width: 280px;
            min-height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            z-index: 1000;
            padding: calc(var(--spacing-unit) * 4);
        }
        
        .nav-item {
            padding: calc(var(--spacing-unit) * 2);
            margin: calc(var(--spacing-unit) / 2) 0;
            border-radius: calc(var(--border-radius) / 2);
            transition: all 0.3s ease;
            color: #ffffff;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: calc(var(--spacing-unit) * 2);
        }
        
        .nav-item:hover, .nav-item.active {
            background: rgba(255, 20, 147, 0.2);
            color: #ffffff;
            transform: translateX(4px);
            text-decoration: none;
        }
        
        /* Content Area */
        .main-content {
            margin-left: 280px;
            padding: calc(var(--spacing-unit) * 4);
            min-height: 100vh;
        }
        
        /* WCAG AAA Contrast Ratios */
        .text-contrast-high { color: #ffffff; }
        .text-contrast-medium { color: rgba(255, 255, 255, 0.87); }
        .text-contrast-low { color: rgba(255, 255, 255, 0.6); }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            
            .main-content {
                margin-left: 0;
                padding: calc(var(--spacing-unit) * 2);
            }
            
            .orbital-container {
                width: 300px;
                height: 300px;
            }
            
            .ai-brain-hub {
                width: 150px;
                height: 150px;
            }
        }
        
        /* Orbital Animations */
        @keyframes orbit {
            from { transform: rotate(0deg) translateX(160px) rotate(0deg); }
            to { transform: rotate(360deg) translateX(160px) rotate(-360deg); }
        }
        
        .satellite[data-module="blockchain"] { animation: orbit 8s linear infinite; }
        .satellite[data-module="contracts"] { animation: orbit 10s linear infinite; }
        .satellite[data-module="analysis"] { animation: orbit 12s linear infinite; }
        .satellite[data-module="storage"] { animation: orbit 14s linear infinite; }
    </style>
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- AI Brain Navigation Sidebar -->
    <nav class="nav-sidebar" role="navigation" aria-label="Main navigation">
        <!-- DAODISEO Brand -->
        <div class="mb-4">
            <h1 class="text-contrast-high fs-4 fw-bold mb-0">
                <i data-feather="cpu" class="me-2"></i>
                DAODISEO.APP
            </h1>
            <p class="text-contrast-low small mb-0">Neural Real Estate Platform</p>
        </div>
        
        <!-- AI Brain Status -->
        <div class="glass-card p-3 mb-4">
            <div class="d-flex align-items-center gap-2 mb-2">
                <div class="ai-brain-hub" style="width: 40px; height: 40px;">
                    <div class="ai-brain-core" style="width: 24px; height: 24px; font-size: 10px;">AI</div>
                </div>
                <div>
                    <div class="text-contrast-high fw-semibold small">Neural Orchestrator</div>
                    <div class="text-contrast-low" style="font-size: 10px;">Status: Active</div>
                </div>
            </div>
            <div class="text-contrast-medium small">
                <span class="badge" style="background: var(--brain-success); color: #000;">260 pts</span>
                Real-time processing
            </div>
        </div>
        
        <!-- Navigation Menu -->
        <div class="mb-4">
            <a href="/" class="nav-item {% if request.endpoint == 'index' %}active{% endif %}">
                <i data-feather="home"></i>
                <span>Dashboard</span>
            </a>
            <a href="/viewer" class="nav-item {% if request.endpoint == 'viewer' %}active{% endif %}">
                <i data-feather="eye"></i>
                <span>3D Viewer</span>
            </a>
            <a href="/upload" class="nav-item {% if request.endpoint == 'upload' %}active{% endif %}">
                <i data-feather="upload"></i>
                <span>Upload</span>
            </a>
            <a href="/contracts" class="nav-item {% if request.endpoint == 'contracts' %}active{% endif %}">
                <i data-feather="file-text"></i>
                <span>Contracts</span>
            </a>
        </div>
        
        <!-- AI Brain Actions -->
        <div class="glass-card p-3">
            <h6 class="text-contrast-high mb-3">Quick Actions</h6>
            <button class="btn btn-brain-primary w-100 mb-2" onclick="window.aiBrain.connectWallet()">
                <i data-feather="link" class="me-1"></i>
                Connect Keplr
            </button>
            <button class="btn btn-brain-secondary w-100">
                <i data-feather="zap" class="me-1"></i>
                AI Analysis
            </button>
        </div>
    </nav>
    
    <!-- Main Content Area -->
    <main class="main-content" role="main">
        <!-- Top Header Bar -->
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h1 class="text-contrast-high mb-1">{% block page_title %}AI Brain Dashboard{% endblock %}</h1>
                <p class="text-contrast-medium mb-0">{% block page_subtitle %}Neural blockchain orchestration{% endblock %}</p>
            </div>
            
            <!-- User Profile Actions -->
            <div class="d-flex align-items-center gap-3">
                <div class="glass-card px-3 py-2">
                    <div class="d-flex align-items-center gap-2">
                        <div style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 50%; background: rgba(224, 13, 121, 0.2);">
                            <i data-feather="user"></i>
                        </div>
                        <div class="text-contrast-high small fw-medium">Neural User</div>
                    </div>
                </div>
                
                <button class="btn btn-brain-primary" onclick="window.aiBrain.deployContract()">
                    <i data-feather="rocket" class="me-1"></i>
                    Deploy
                </button>
            </div>
        </div>
        
        <!-- Page Content -->
        <div class="content-wrapper">
            {% block content %}
            <!-- Default AI Brain Central Hub -->
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="glass-card text-center p-5 mb-4">
                        <div class="orbital-container mx-auto mb-4">
                            <div class="ai-brain-hub">
                                <div class="ai-brain-core">
                                    AI BRAIN<br>
                                    <small>Neural Orchestrator</small>
                                </div>
                            </div>
                            
                            <!-- Orbital Satellites -->
                            <div class="satellite" style="top: 50px; left: 160px;" data-module="blockchain">
                                <i data-feather="link-2"></i>
                            </div>
                            <div class="satellite" style="top: 160px; right: 50px;" data-module="contracts">
                                <i data-feather="file-text"></i>
                            </div>
                            <div class="satellite" style="bottom: 50px; left: 160px;" data-module="analysis">
                                <i data-feather="brain"></i>
                            </div>
                            <div class="satellite" style="top: 160px; left: 50px;" data-module="storage">
                                <i data-feather="database"></i>
                            </div>
                        </div>
                        
                        <h2 class="text-contrast-high mb-3">Welcome to DAODISEO AI Brain</h2>
                        <p class="text-contrast-medium mb-4">
                            Neural orchestration platform for blockchain real estate tokenization
                        </p>
                        
                        <div class="d-flex justify-content-center gap-3">
                            <button class="btn btn-brain-primary" onclick="window.location='/upload'">
                                <i data-feather="upload" class="me-2"></i>
                                Start Upload
                            </button>
                            <button class="btn btn-brain-secondary" onclick="window.location='/viewer'">
                                <i data-feather="eye" class="me-2"></i>
                                Explore Models
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% endblock %}
        </div>
    </main>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Feather Icons Initialization -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof feather !== 'undefined') {
                feather.replace();
                console.log('Feather icons initialized');
            }
        });
    </script>
    
    <!-- AI Brain Core System -->
    <script>
        // AI Brain Global State Management
        window.aiBrain = {
            status: 'active',
            modules: {
                blockchain: { status: 'connected', health: 100 },
                contracts: { status: 'ready', health: 95 },
                analysis: { status: 'processing', health: 87 },
                storage: { status: 'synced', health: 92 }
            },
            
            // Core Functions
            connectWallet: function() {
                console.log('AI Brain: Initiating wallet connection...');
                // Keplr integration logic here
            },
            
            deployContract: function() {
                console.log('AI Brain: Deploying smart contract...');
                // Contract deployment logic here
            },
            
            analyzeAsset: function(assetData) {
                console.log('AI Brain: Analyzing asset with neural network...');
                // AI analysis logic here
            },
            
            // Orbital Animation
            initOrbitalAnimation: function() {
                const satellites = document.querySelectorAll('.satellite');
                satellites.forEach((satellite, index) => {
                    satellite.style.animation = `orbit ${8 + index * 2}s linear infinite`;
                });
            },
            
            // Neural Pulse Effect
            triggerNeuralPulse: function() {
                const hub = document.querySelector('.ai-brain-hub');
                if (hub) {
                    hub.style.animation = 'neuralPulse 2s ease-in-out';
                    setTimeout(() => {
                        hub.style.animation = '';
                    }, 2000);
                }
            }
        };
        
        // Initialize AI Brain on load
        document.addEventListener('DOMContentLoaded', function() {
            window.aiBrain.initOrbitalAnimation();
            console.log('AI Brain Neural Orchestrator: Online');
        });
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>